# API сервиса почты

Предложенное API предоставляет доступ к обычным функциям e-mail.

Опишем ресурсы, к которым API предоставляет доступ.

### Сообщения

Все сообщения предполагаются неизменяемыми, их можно создавать и удалять.

```json
{
    "id": string,
    "thread_id": string,
    "label_ids": [
        string
    ],
    "payload": {
        "body": string,
        "headers": [
            {
                "name": string,
                "value": string
            }
        ]
    }
}
```

Доступные методы:
Запрос | Описание
------------ | -------------
DELETE  /userId/messages/id | Удалить сообщение
GET  /userId/messages/id | Получить сообщение
GET /userId/messages | Получить все сообщения пользователя
POST  /userId/messages/id/modify | Модифицировать метки сообщения, в теле запроса нужно передать структуру ```{"addLabelIds": [string], "removeLabelIds": [string]}```
POST /userId/messages/send | Отправить сообещения пользователям, указанным в ```headers['To']``` (получатель) и ```headers['Cc']``` (копия) поля ```payload``` сообщения

### Метки
Метки служат средством упорядочения сообщений и тредов. Бывают системные метки ```INBOX```, ```SENT```, а бывают пользовательские.

```json
{
    "id": string,
    "name": string,
    "messagesTotal": integer,
    "messagesUnread": integer
}
```

Доступные методы:
Запрос | Описание
------------ | -------------
POST  /userId/labels | Создать метку, в теле нужно передать структуру ```{"name": string}```
DELETE  /userId/labels/id | Удалить метку
GET  /userId/labels | Получить все метки пользователя
PUT  /userId/labels/id | Обновить существующую метку, в теле нужно передать структуру ```{"name": string}```
GET  /userId/labels/id | Получить существующую метку

### Черновики

Черновики представляют собой неотправленные сообщения. Отправка сообщения автоматически удаляет черновик и создает сообщение с меткой ```SENT```.

Доступные методы:
Запрос | Описание
------------ | -------------
POST  /userId/drafts | Создать черновик, в теле нужно передать структуру ```payload``` из описания сообщения выше
DELETE  /userId/drafts/id | Удалить черновик
GET  /userId/drafts/id | Получить черновик
GET  /userId/drafts | Получить все черновики пользователя
PUT  /userId/drafts/id | Редактировать сообщение, в теле нужно передать структуру ```payload``` из описания сообщения выше
POST  /userId/drafts/send | Отправить сообещения пользователям, указанным в ```headers['To']``` (получатель) и ```headers['Cc']``` (копия) поля ```payload``` сообщения

### Треды
Треды являются последовательностью сообщений, представляющими беседу. Треды нельзя создавать, их можно только удалять.

Описание
```json
{
    "id": string,
    "messages": [
        message
    ]
}
```

В списке ```messages``` лежат описания сообщений выше.

Доступные методы:
Запрос | Описание
------------ | -------------
GET  /userId/threads/id | Получить тред
GET  /userId/threads | Получить все треды пользователя
POST  /userId/threads/id/modify | Модифицировать метки треда, в теле запроса нужно передать структуру ```{"addLabelIds": [string], "removeLabelIds": [string]}```, будет применено ко всем сообщениям в треде
DELETE  /userId/threads/id | Удалить тред
